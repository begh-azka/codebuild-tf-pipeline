# Step 1: Approval Step
steps:
- id: 'branch name'
  name: gcr.io/cloud-builders/git
  entrypoint: 'sh'
  args:
  - '-c'
  - |
      echo "***********************"
      git branch --show-current
      echo 
      
- name: 'hashicorp/terraform'
  entrypoint: 'sh'
  args:
      - '-c'
      - |
        echo "Review Terraform Plan:"
        terraform show tfplan
        echo "Please review the plan. If it looks good, approve the build. If not, cancel it."
        terraform apply -auto-approve

logsBucket: 'gs://logs-cb-cloudbuild'
options:
    logging: GCS_ONLY
